const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  
  const apiKey = process.env.GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash-exp",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  

    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel  plan for location: Goa , for 3 days for couple with  a Cheap budget , give me a hotels options list with Hotel Name , Hotel address , price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with place Name, place Details, place image url, geo coordinates, rating, ticket pricing, rating, time travel each of location for 3 days with each day plan with best to visit and estimate the total cost of trip in JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"trip_details\": {\n    \"location\": \"Goa\",\n    \"duration\": \"3 days\",\n    \"travelers\": \"Couple\",\n    \"budget\": \"Cheap\"\n  },\n  \"hotel_options\": [\n    {\n      \"hotel_name\": \"RedDoorz @ Calangute Beach 2\",\n      \"hotel_address\": \"House No. 276/A, Gawde Wada, Near Domino's Pizza, Calangute, Bardez, Goa 403516\",\n       \"price\": \"₹1500 - ₹2000 per night\",\n      \"image_url\": \"https://cf.bstatic.com/images/hotel/max1024x768/223/223420212.jpg\",\n       \"geo_coordinates\": {\n        \"latitude\": 15.5439,\n        \"longitude\": 73.7611\n       },\n      \"rating\": 3.8,\n      \"description\": \"Basic, clean rooms, close to Calangute beach, good for budget travelers.\"\n    },\n        {\n          \"hotel_name\": \"Hotel La Riella\",\n          \"hotel_address\": \"Gauravaddo, Calangute, Bardez, Goa 403516\",\n           \"price\": \"₹1800 - ₹2200 per night\",\n          \"image_url\": \"https://cf.bstatic.com/images/hotel/max1024x768/245/245762248.jpg\",\n           \"geo_coordinates\": {\n            \"latitude\": 15.5454,\n            \"longitude\": 73.7633\n           },\n          \"rating\": 4.0,\n          \"description\": \"Comfortable budget hotel near Calangute, with decent amenities.\"\n        },\n    {\n      \"hotel_name\": \"OYO 60546 Calangute Residency\",\n      \"hotel_address\": \"House No-347/1, Near Bank Of Maharashtra, Gaura Vaddo, Calangute, Goa 403516\",\n       \"price\": \"₹1400 - ₹1800 per night\",\n      \"image_url\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/20/6c/f8/1d/oyo-60546-calangute-residency.jpg?w=700&h=-1&s=1\",\n       \"geo_coordinates\": {\n        \"latitude\": 15.5451,\n         \"longitude\": 73.7624\n       },\n      \"rating\": 3.5,\n      \"description\": \"Simple and affordable, located in Calangute, offers basic amenities.\"\n    }\n  ],\n \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"South Goa Exploration\",\n      \"activities\": [\n          {\n           \"place_name\": \"Palolem Beach\",\n           \"place_details\": \"Known for its calm waters, scenic beauty, and dolphin sighting opportunities. Great for relaxation and swimming.\",\n             \"image_url\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/09/4f/77/d5/palolem-beach.jpg?w=700&h=-1&s=1\",\n             \"geo_coordinates\": {\n                 \"latitude\": 15.0116,\n                \"longitude\": 74.0210\n                },\n           \"rating\": 4.5,\n           \"ticket_pricing\": \"Free\",\n          \"time_travel\": \"2 hours from Calangute\"\n          },\n          {\n             \"place_name\": \"Agonda Beach\",\n             \"place_details\":\"A quieter beach, ideal for couples looking for a peaceful atmosphere. Famous for its scenic beauty and serenity.\",\n            \"image_url\":\"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/19/2e/60/57/agonda-beach.jpg?w=700&h=-1&s=1\",\n              \"geo_coordinates\":{\n                  \"latitude\": 14.9636,\n                  \"longitude\": 73.9799\n              },\n             \"rating\": 4.4,\n             \"ticket_pricing\":\"Free\",\n             \"time_travel\":\"30 minutes from Palolem beach\"\n\n          },\n           {\n             \"place_name\": \"Cabo de Rama Fort\",\n             \"place_details\": \"A historical fort offering panoramic views of the coastline. Explore the fort and enjoy breathtaking sunset.\",\n            \"image_url\":\"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/15/a4/e6/a1/photo0jpg.jpg?w=700&h=-1&s=1\",\n              \"geo_coordinates\":{\n                \"latitude\": 15.0371,\n                  \"longitude\": 73.9789\n                },\n             \"rating\": 4.2,\n            \"ticket_pricing\": \"Free\",\n            \"time_travel\": \"30 minutes from Agonda beach\"\n         }\n        ]\n    },\n     \"day2\": {\n      \"theme\":\"North Goa Beaches & Culture\",\n      \"activities\": [\n        {\n           \"place_name\": \"Calangute Beach\",\n           \"place_details\": \"One of the most popular beaches in Goa. Enjoy water sports, stroll along the shore, and try local seafood. \",\n             \"image_url\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1c/91/7e/5b/calangute-beach.jpg?w=700&h=-1&s=1\",\n             \"geo_coordinates\": {\n                \"latitude\": 15.5493,\n                \"longitude\": 73.7643\n               },\n           \"rating\": 4.0,\n           \"ticket_pricing\": \"Free\",\n           \"time_travel\":\"Directly accessible from the hotel\"\n        },\n        {\n          \"place_name\": \"Baga Beach\",\n          \"place_details\": \"Known for its lively atmosphere, water sports, and beach shacks. Enjoy the vibrant nightlife and shopping nearby.\",\n          \"image_url\":\"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/15/a1/be/c7/baga-beach.jpg?w=700&h=-1&s=1\",\n           \"geo_coordinates\": {\n             \"latitude\": 15.5598,\n             \"longitude\": 73.7559\n            },\n          \"rating\": 4.1,\n         \"ticket_pricing\":\"Free\",\n          \"time_travel\":\"10 minutes from Calangute Beach\"\n         },\n        {\n          \"place_name\": \"Fort Aguada\",\n          \"place_details\":\"A 17th-century Portuguese fort. Offers great views of the sea, a historic lighthouse, and surrounding areas.\",\n          \"image_url\":\"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/15/9c/c3/08/fort-aguada.jpg?w=700&h=-1&s=1\",\n            \"geo_coordinates\": {\n                \"latitude\": 15.4963,\n                 \"longitude\": 73.7589\n               },\n          \"rating\": 4.3,\n          \"ticket_pricing\":\"₹25 per person\",\n          \"time_travel\": \"20 minutes from Baga Beach\"\n\n        }\n\n       ]\n\n     },\n    \"day3\": {\n      \"theme\":\"Panjim City & Shopping\",\n      \"activities\":[\n         {\n           \"place_name\":\"Dona Paula\",\n           \"place_details\":\"Offers a scenic view of the harbor, a love story legend, and a variety of water activities. Ideal for spending some leisurely time.\",\n           \"image_url\":\"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1b/9c/c7/46/dona-paula.jpg?w=700&h=-1&s=1\",\n           \"geo_coordinates\": {\n             \"latitude\": 15.4205,\n             \"longitude\": 73.8019\n            },\n           \"rating\":4.2,\n           \"ticket_pricing\":\"Free\",\n           \"time_travel\":\"1 Hour from Calangute \"\n         },\n          {\n             \"place_name\": \"Panjim City\",\n             \"place_details\":\"Explore the capital city, visit the old Latin Quarter (Fontainhas), and enjoy shopping for souvenirs in local markets.\",\n            \"image_url\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/18/6f/95/8c/panjim.jpg?w=700&h=-1&s=1\",\n            \"geo_coordinates\": {\n              \"latitude\": 15.5012,\n              \"longitude\": 73.8327\n             },\n             \"rating\":4.0,\n             \"ticket_pricing\":\"Free\",\n             \"time_travel\":\"20 minutes from Dona Paula \"\n          },\n          {\n             \"place_name\": \"Mandovi River Cruise\",\n             \"place_details\":\"Enjoy a sunset river cruise on the Mandovi River, offering views of the city and sometimes cultural performances.\",\n             \"image_url\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/10/49/9e/52/goa.jpg?w=700&h=-1&s=1\",\n             \"geo_coordinates\": {\n                \"latitude\":15.4988,\n                \"longitude\":73.8271\n                },\n             \"rating\":4.3,\n            \"ticket_pricing\":\"₹300- ₹500 per person\",\n             \"time_travel\": \"Within Panjim city\"\n           }\n      ]\n     }\n   },\n  \"estimated_cost\": {\n    \"accommodation\": \"₹4500 - ₹6600 (3 nights)\",\n    \"transportation\": \"₹3000 - ₹4000 (Scooter rental or local transport)\",\n     \"food\": \"₹4000 - ₹5000\",\n    \"activities\": \"₹1000 - ₹1500 (Fort entrance, river cruise)\",\n    \"miscellaneous\": \"₹1000\",\n    \"total\": \"₹13500 - ₹18100 (Approximately)\"\n  }\n}\n```"},
          ],
        },
      ],
    });
  
    
  
  
